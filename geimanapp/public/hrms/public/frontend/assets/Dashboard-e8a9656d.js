import{i as h,Q as k,c as q,e as y,f as w,z as b,l as i,n as o,k as s,x as R,t as a,O as m,q as g}from"./frappe-ui-02049d65.js";import A from"./BaseLayout-5eccbb01.js";import x from"./AttendanceRequestItem-78e3d3ff.js";import V from"./ShiftRequestItem-3d1d2b10.js";import $ from"./ShiftAssignmentItem-43cca346.js";import l from"./RequestList-0f4f1ccb.js";import C from"./AttendanceCalendar-1bd93db6.js";import{g as L,a as D,b as T,m as j,c as N}from"./attendance-496ae3d9.js";import"./index-1b959967.js";import"./notifications-85a1fb4f.js";import"./user-9e8700ad.js";import"./ListItem-3fa63396.js";import"./EmployeeAvatar-6acab2d7.js";import"./employee-399cdb46.js";import"./ShiftIcon-e9518345.js";import"./requestSummaryFields-7e2c6adb.js";import"./FormattedField-abf651f5.js";import"./workflow-0b2a2f3b.js";import"./formatters-c2abf875.js";const F={class:"flex flex-col mt-7 mb-7 p-4 gap-7"},M={class:"w-full"},z={class:"text-lg text-gray-800 font-bold"},O={class:"text-lg text-gray-800 font-bold"},P={class:"w-full"},Q={class:"text-lg text-gray-800 font-bold"},lt={__name:"Dashboard",setup(U){const v=h("$employee"),c=h("$dayjs"),S=k({url:"hrms.api.get_shifts",auto:!0,cache:"hrms:shifts",makeParams(){var t;return{employee:(t=v.data)==null?void 0:t.name}},transform:t=>t.map(e=>(e.doctype="Shift Assignment",e.is_upcoming=!e.end_date||c(e.end_date).isAfter(c()),e.shift_dates=L(e),e.total_shift_days=D(e),e.shift_timing=T(e),e))}),B=q(()=>{var e;const t=(e=S.data)==null?void 0:e.filter(n=>n.is_upcoming);return t==null?void 0:t.slice(0,5)});return(t,e)=>{const n=y("Button"),u=y("router-link");return w(),b(A,{pageTitle:"Attendance"},{body:i(()=>{var _,d,p,f;return[o("div",F,[s(C),o("div",M,[s(u,{to:{name:"AttendanceRequestFormView"}},{default:i(({navigate:r})=>[s(n,{onClick:r,variant:"solid",class:"w-full py-5 text-base"},{default:i(()=>[R(a(t.__("Request Attendance")),1)]),_:2},1032,["onClick"])]),_:1})]),o("div",null,[o("div",z,a(t.__("Recent Attendance Requests")),1),s(l,{component:m(x),items:(d=(_=g(j))==null?void 0:_.data)==null?void 0:d.slice(0,5),addListButton:!0,listButtonRoute:t.__("AttendanceRequestListView")},null,8,["component","items","listButtonRoute"])]),o("div",null,[o("div",O,a(t.__("Upcoming Shifts")),1),s(l,{component:m($),items:B.value,addListButton:!0,listButtonRoute:"ShiftAssignmentListView",emptyStateMessage:t.__("You have no upcoming shifts")},null,8,["component","items","emptyStateMessage"])]),o("div",P,[s(u,{to:{name:"ShiftRequestFormView"}},{default:i(({navigate:r})=>[s(n,{onClick:r,variant:"solid",class:"w-full py-5 text-base"},{default:i(()=>[R(a(t.__("Request a Shift")),1)]),_:2},1032,["onClick"])]),_:1})]),o("div",null,[o("div",Q,a(t.__("Recent Shift Requests")),1),s(l,{component:m(V),items:(f=(p=g(N))==null?void 0:p.data)==null?void 0:f.slice(0,5),addListButton:!0,listButtonRoute:"ShiftRequestListView"},null,8,["component","items"])])])]}),_:1})}}};export{lt as default};
//# sourceMappingURL=Dashboard-e8a9656d.js.map
