import{I as V,a as M}from"./index-1b959967.js";import{i as y,a1 as R,a as z,c as D,Q as P,b as A,e as C,f as o,z as d,l as n,q as e,k as l,n as s,v as h,t as c,j as m,U as f,x as p,F as H,H as T,I as E}from"./frappe-ui-02049d65.js";import F from"./EmployeeAvatar-6acab2d7.js";import U from"./EmptyState-3bef2d7a.js";import{n as t,a as q,u as g}from"./notifications-85a1fb4f.js";import"./employee-399cdb46.js";import"./user-9e8700ad.js";const Q={class:"flex flex-col h-screen w-screen"},Y={class:"w-full sm:w-96"},G={class:"flex flex-row bg-white shadow-sm py-4 px-3 items-center justify-between border-b sticky top-0 z-10"},J={class:"flex flex-row items-center"},K={class:"text-xl font-semibold text-gray-900"},O={class:"flex flex-col gap-4 mt-5 p-4"},W={class:"flex flex-row justify-between items-center"},X={key:0,class:"text-lg text-gray-800 font-semibold"},Z={class:"flex ml-auto gap-1"},ee={key:0,class:"flex flex-col bg-white rounded"},te={class:"flex flex-col gap-0.5 grow ml-3"},se=["innerHTML"],ae={class:"text-xs font-normal text-gray-500"},oe={key:1,class:"flex"},N=10,me={__name:"Notifications",setup(ne){const $=y("$dayjs"),x=R(),i=y("$translate"),b=z(0),j=D(()=>{var r;return((r=window.frappe)==null?void 0:r.boot.push_relay_server_url)&&q.data}),k=P({url:"hrms.api.mark_all_notifications_as_read",onSuccess(){t.reload()}});function I(r){t.setValue.submit({name:r,read:1},{onSuccess:()=>{g.reload()}})}function L(r){return{name:`${r.reference_document_type.replace(/\s+/g,"")}DetailView`,params:{id:r.reference_document_name}}}A(()=>{t.start=0,t.pageLength=10,t.fetch()});function B(){b.value+=N,t.start=b.value,t.pageLength=N,t.list.fetch()}return(r,u)=>{const _=C("Button"),S=C("router-link");return o(),d(e(M),null,{default:n(()=>[l(e(V),{class:"ion-padding"},{default:n(()=>{var v,w;return[s("div",Q,[s("div",Y,[s("header",G,[s("div",J,[l(_,{variant:"ghost",class:"!pl-0 hover:bg-white",onClick:u[0]||(u[0]=a=>e(x).back())},{default:n(()=>[l(e(h),{name:"chevron-left",class:"h-5 w-5"})]),_:1}),s("h2",K,c(e(i)("Notifications")),1)])]),s("div",O,[s("div",W,[e(g).data?(o(),m("div",X,c(e(i)("{0} Unread",[e(g).data])),1)):f("",!0),s("div",Z,[j.value?(o(),d(_,{key:0,variant:"outline",onClick:u[1]||(u[1]=a=>e(x).push({name:"Settings"}))},{prefix:n(()=>[l(e(h),{name:"settings",class:"w-4"})]),default:n(()=>[p(" "+c(e(i)("Settings")),1)]),_:1})):f("",!0),e(g).data?(o(),d(_,{key:1,variant:"outline",onClick:e(k).submit,loading:e(k).loading},{prefix:n(()=>[l(e(h),{name:"check-circle",class:"w-4"})]),default:n(()=>[p(" "+c(e(i)("Mark all as read")),1)]),_:1},8,["onClick","loading"])):f("",!0)])]),(v=e(t).data)!=null&&v.length?(o(),m("div",ee,[(o(!0),m(H,null,T(e(t).data,a=>(o(),d(S,{class:E(["flex flex-row items-start p-4 justify-between border-b before:mt-3","before:content-[''] before:mr-2 before:shrink-0 before:w-1.5 before:h-1.5 before:rounded-full",a.read?"bg-white-500":"before:bg-blue-500"]),key:a.name,to:L(a),onClick:re=>I(a.name)},{default:n(()=>[l(F,{userID:a.from_user,size:"lg"},null,8,["userID"]),s("div",te,[s("div",{class:"text-sm leading-5 font-normal text-gray-800",innerHTML:a.message},null,8,se),s("div",ae,c(e($)(a.creation).fromNow()),1)])]),_:2},1032,["class","to","onClick"]))),128))])):f("",!0),(w=e(t).data)!=null&&w.length&&e(t).hasNextPage?(o(),m("div",oe,[l(_,{variant:"outline",class:"ml-auto",onClick:B},{default:n(()=>[p(c(e(i)("Load more")),1)]),_:1})])):e(t).data?f("",!0):(o(),d(U,{key:2,message:e(i)("You have no notifications")},null,8,["message"]))])])])]}),_:1})]),_:1})}}};export{me as default};
//# sourceMappingURL=Notifications-91c7c958.js.map
