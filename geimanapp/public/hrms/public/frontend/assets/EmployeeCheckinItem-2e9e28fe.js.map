{"version":3,"file":"EmployeeCheckinItem-2e9e28fe.js","sources":["../../../../hrms-dashboard/src/components/EmployeeCheckinItem.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted } from \"vue\";\n// The problematic 'import { frappe }' is removed.\nimport { Button } from \"frappe-ui\";\n\nconst props = defineProps([\"employee\"]);\nconst emit = defineEmits([\"checkin\"]);\n\nconst loading = ref(false);\n\nfunction checkin(log_type) {\n  loading.value = true;\n  // MODIFICATION: Use window.frappe for API calls\n  window.frappe.call({\n    method: \"hrms.hr.utils.check_in\",\n    args: {\n      employee: props.employee.name,\n      log_type: log_type,\n      project: selectedProject.value\n    },\n    callback: (r) => {\n      loading.value = false;\n      if (!r.exc) {\n        emit(\"checkin\");\n      }\n    },\n  });\n}\n\nconst projects = ref([]);\nconst selectedProject = ref(null);\n\nonMounted(() => {\n  // MODIFICATION: Use window.frappe for API calls\n  window.frappe.call({\n    method: \"frappe.client.get_list\",\n    args: {\n      doctype: \"Project\",\n      fields: [\"name\"],\n      filters: {\n        status: \"Open\"\n      },\n      limit: 100 // Fetch up to 100 open projects\n    },\n    callback: (r) => {\n      if (r.message) {\n        projects.value = r.message;\n      }\n    }\n  });\n});\n</script>\n\n<template>\n\t<div class=\"flex items-center justify-between p-4\">\n\t\t<div class=\"flex items-center\">\n\t\t\t<img :src=\"employee.image\" class=\"w-12 h-12 mr-4 rounded-full\" />\n\t\t\t<div>\n\t\t\t\t<p class=\"text-lg font-semibold text-gray-800\">\n\t\t\t\t\t{{ employee.employee_name }}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"text-sm text-gray-500\">\n\t\t\t\t\t{{ employee.designation }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"flex flex-col items-end w-48\">\n\t\t\t<div class=\"w-full mb-3\">\n\t\t\t\t<label :for=\"'project-select-' + employee.name\" class=\"sr-only\">Project</label>\n\t\t\t\t<select :id=\"'project-select-' + employee.name\" v-model=\"selectedProject\" class=\"block w-full py-2 pl-3 pr-10 text-base border-gray-300 rounded-md focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm\">\n\t\t\t\t\t<option :value=\"null\">Select Project (Optional)</option>\n\t\t\t\t\t<option v-for=\"project in projects\" :key=\"project.name\" :value=\"project.name\">\n\t\t\t\t\t\t{{ project.name }}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div class=\"flex space-x-2\">\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\ttheme=\"gray\"\n\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t@click=\"checkin('IN')\"\n\t\t\t\t>\n\t\t\t\t\tCheck In\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\ttheme=\"gray\"\n\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t@click=\"checkin('OUT')\"\n\t\t\t\t>\n\t\t\t\t\tCheck Out\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n"],"names":["props","__props","emit","__emit","loading","ref","checkin","log_type","selectedProject","r","projects","onMounted"],"mappings":"qhBAKA,MAAMA,EAAQC,EACRC,EAAOC,EAEPC,EAAUC,EAAI,EAAK,EAEzB,SAASC,EAAQC,EAAU,CACzBH,EAAQ,MAAQ,GAEhB,OAAO,OAAO,KAAK,CACjB,OAAQ,yBACR,KAAM,CACJ,SAAUJ,EAAM,SAAS,KACzB,SAAUO,EACV,QAASC,EAAgB,KAC1B,EACD,SAAWC,GAAM,CACfL,EAAQ,MAAQ,GACXK,EAAE,KACLP,EAAK,SAAS,CAEjB,CACL,CAAG,CACH,CAEA,MAAMQ,EAAWL,EAAI,CAAA,CAAE,EACjBG,EAAkBH,EAAI,IAAI,EAEhC,OAAAM,EAAU,IAAM,CAEd,OAAO,OAAO,KAAK,CACjB,OAAQ,yBACR,KAAM,CACJ,QAAS,UACT,OAAQ,CAAC,MAAM,EACf,QAAS,CACP,OAAQ,MACT,EACD,MAAO,GACR,EACD,SAAWF,GAAM,CACXA,EAAE,UACJC,EAAS,MAAQD,EAAE,QAEvB,CACJ,CAAG,CACH,CAAC"}